<!DOCTYPE html>
<html lang="en">
  <head>
    <title>project</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link  href="https://cdn.jsdelivr.net/npm/vuetify@3.4.10/dist/vuetify.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/vuetify@3.4.10/dist/vuetify.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="app">
      <v-app>
        <v-container>
          <v-card>
            <v-card-title class="bg-blue-grey">{{title}}</v-card-title>
            <v-card-text class="pa-6">
              
                <v-card-text class="pa-6">
                    <v-text-field v-model="editstd.id" label="รหัสวิชา"></v-text-field>
                    <v-text-field v-model="editstd.subject" label="ชื่อวิชา"></v-text-field>
                    <v-text-field v-model="editstd.room" label="ห้อง"></v-text-field>
                    <v-text-field v-model="editstd.class_date" label="วันที่"></v-text-field>
               </v-card-text>
               <v-card-actions>
                    <v-btn @click="savedata()">Save</v-btn>
               </v-card-actions>
            
               <v-card v-if="editmode">
                <v-card-text class="pa-6">
                    <v-card-title class="bg-blue-grey">{{editmode}}</v-card-title>
                    1+1 = ?
                    <v-text-field v-model="" label="ข้อ1"></v-text-field>
                    1+3 = ?
                    <v-text-field v-model="" label="ข้อ2"></v-text-field>
                    5/2 = ?
                    <v-text-field v-model="" label="ข้อ3"></v-text-field>
                    450/7) = ?
                    <v-text-field v-model="" label="ข้อ4"></v-text-field>
               </v-card-text>
               <v-card-actions>
                    <v-btn @click="savedata()">Save</v-btn>
                    <v-btn @click="editmode=0">Cancel</v-btn>
               </v-card-actions>
             </v-card>
            

            </v-card-text>
            <v-card-actions>
              <v-btn @click="addData()">Work</v-btn>
            </v-card-actions>
          </v-card>
          <div class="pa-6 text-center">{{footer}}</div>
        </v-container>        
      </v-app>
    </div>
 
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyB3DMWkNDrCUnJlaMHTVCiH6jZaJ6BZIaY",
        authDomain: "projectweb2566-a5f28.firebaseapp.com",
        projectId: "projectweb2566-a5f28",
        storageBucket: "projectweb2566-a5f28.appspot.com",
        messagingSenderId: "313603244545",
        appId: "1:313603244545:web:13f08d8d24549872397600",
        measurementId: "G-Z0STKCTRPC"
      };
    firebase.initializeApp(firebaseConfig);      
    const db = firebase.firestore();

    const vuetify = Vuetify.createVuetify();
    const app = Vue.createApp({
      data() {
          return {
            title: "Student Page",
            footer: "ระบุ รหัส ชื่อ-สกุล สาขา",
            students: [],
            editstd : {},
            editmode: {},
            editwork: {},
            editmode : 0,
          };
        },
        methods: {
          readData(){
            db.collection("students")
            .get()
            .then((querySnapshot) => {
              var stdlist = [];
              querySnapshot.forEach((doc) => {
                stdlist.push({ id: doc.id, ...doc.data() });
              });
              this.students = stdlist;
            });
          },
          edit(std){
             this.editstd = std;
             this.editmode = "edit";
          },
          savedata(){
            db.collection("checkin").doc(this.editstd.id).set(this.editstd);
          },
          addData(){
            this.editmode = "งาน";
            this.editwork = {};
          },

        }
      });
    app.use(vuetify).mount("#app");
    </script>
  </body>
</html>
